---
openapi: 3.0.1
info:
  title: API V1
  version: v1
paths:
  "/payment":
    post:
      summary: payment
      tags:
      - Payment
      parameters: []
      responses:
        '200':
          description: payment response
          content:
            application/json:
              example:
                status_code: 0
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_id:
                  type: string
                  description: 特店代碼
                  example: '9999999'
                merchant_key:
                  type: string
                  example: 2AA6B9B6F9C64247ABB2677B6AF2C896
                card_token:
                  type: string
                  description: 支付條碼
                  example: 22C333334444455555
                store_id:
                  type: string
                  description: 商店編號
                  example: '1234'
                store_name:
                  type: string
                  description: 商店名稱
                  example: 街口測試
                merchant_trade_number:
                  type: string
                  description: 商店端交易序號(付款流水號)
                  example: '1234555555'
                pos_id:
                  type: string
                  description: POS機號
                  example: '1'
                pos_trade_time:
                  type: string
                  description: POS 端交易日期時間, 格式:yyyy/MM/dd HH:mm:ss
                  example: 2020/08/01 10:05:11
                trade_amount:
                  type: integer
                  description: 實際消費金額
                  example: 10
                un_redeem_amount:
                  type: integer
                  description: 不可折抵金額, 若無請放 0
                  example: 0
              required:
              - merchant_id
              - merchant_key
              - card_token
              - store_id
              - store_name
              - merchant_trade_number
              - pos_id
              - pos_trade_time
              - trade_amount
              - un_redeem_amount
  "/store":
    get:
      summary: Retrieves all stores
      tags:
      - Stores
      responses:
        '200':
          description: store found
          content:
            application/json:
              example:
                status_code: 0
                stores:
                - id: 1
                  merchant_id: '9999999'
                  store_id: '1'
                  name: 街口測試1
                  pos_id: '1'
                  created_at: '2021-08-20T22:47:53.517Z'
                  updated_at: '2021-08-20T22:47:53.517Z'
                - id: 2
                  merchant_id: '9999999'
                  store_id: '2'
                  name: 街口測試2
                  pos_id: '2'
                  created_at: '2021-08-21T22:47:53.517Z'
                  updated_at: '2021-08-21T22:47:53.517Z'
    post:
      summary: Create a store
      tags:
      - Stores
      parameters: []
      responses:
        '200':
          description: store created
          content:
            application/json:
              example:
                status_code: 0
                store:
                  id: 1
                  merchant_id: '9999999'
                  name: 街口測試1
                  pos_id: '1'
                  created_at: '2021-08-20T22:47:53.517Z'
                  updated_at: '2021-08-20T22:47:53.517Z'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_id:
                  type: string
                name:
                  type: string
                pos_id:
                  type: string
              required:
              - merchant_id
              - name
              - pos_id
  "/store/{id}":
    get:
      summary: Retrieves a store
      tags:
      - Stores
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: store found
          content:
            application/json:
              example:
                status_code: 0
                store:
                  id: 1
                  merchant_id: '9999999'
                  name: 街口測試1
                  pos_id: '1'
                  created_at: '2021-08-20T22:47:53.517Z'
                  updated_at: '2021-08-20T22:47:53.517Z'
    patch:
      summary: Update a store
      tags:
      - Stores
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: update store
          content:
            application/json:
              example:
                status_code: 0
                store:
                  id: 1
                  merchant_id: '9999999'
                  name: 街口測試1
                  pos_id: '1'
                  created_at: '2021-08-20T22:47:53.517Z'
                  updated_at: '2021-08-20T22:47:53.517Z'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                merchant_id:
                  type: string
                name:
                  type: string
                pos_id:
                  type: string
    delete:
      summary: Delete a store
      tags:
      - Stores
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: delete store
          content:
            application/json:
              example:
                status_code: 0
servers:
- url: http://{defaultHost}:3000
  variables:
    defaultHost:
      default: localhost
